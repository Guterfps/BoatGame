(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var i=t.g.document;if(!e&&i&&(i.currentScript&&(e=i.currentScript.src),!e)){var n=i.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();var e=function(){function t(){this.canvas=document.getElementById("BoatGame"),this.canvas?this.context=this.canvas.getContext("2d"):console.log("canvas is null")}return t.prototype.RenderRect=function(t,e,i,n,o){this.context&&(this.context.beginPath(),this.context.fillStyle=o,this.context.fillRect(t,e,i,n),this.context.closePath())},t.prototype.Clear=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.GetWidth=function(){return this.canvas.width},t.prototype.GetHeight=function(){return this.canvas.height},t}(),i=function(){function t(t){this.score=0,this.life_points=3,this.position={x:0,y:0},this.width=100,this.hieght=50,this.position=t}return t.prototype.GetScore=function(){return this.score},t.prototype.SetScore=function(t){this.score=t},t.prototype.GetLifePoints=function(){return this.life_points},t.prototype.SetLifePoints=function(t){this.life_points=t},t.prototype.GetPosition=function(){return this.position},t.prototype.SetPosition=function(t){this.position=t},t.prototype.GetShape=function(){return{pos:this.position,w:this.width,h:this.hieght}},t}();const n=t.p+"ea29d8f3f66867377a43.png";var o,r,s=function(){function t(t){this.ui_font="24px Arial",this.ui_fillStyle="#0095DD",this.image=new Image,this.renderer=t,this.image.src=n}return t.prototype.DrawPlayer=function(t){var e=t.pos,i=t.w,n=t.h,o=e.x,r=e.y;this.renderer.context.drawImage(this.image,o,r,i,n)},t.prototype.DrawScore=function(t){var e=this.renderer.context;e.font=this.ui_font,e.fillStyle=this.ui_fillStyle,e.fillText("Score: ".concat(t),10,20)},t.prototype.DrawLifePoints=function(t){var e=this.renderer.context;e.font=this.ui_font,e.fillStyle=this.ui_fillStyle,e.fillText("Lives: ".concat(t),10,40)},t.prototype.SetRenderer=function(t){this.renderer=t},t.prototype.GetRenderer=function(){return this.renderer},t}(),h=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e};!function(t){t[t.RUN=0]="RUN",t[t.PUSE=1]="PUSE",t[t.GAME_OVER=2]="GAME_OVER",t[t.EXIT=3]="EXIT"}(o||(o={})),function(t){t[t.LEFT=-1]="LEFT",t[t.RIGHT=1]="RIGHT",t[t.UP=-1]="UP",t[t.DOWN=1]="DOWN",t[t.NONE=0]="NONE"}(r||(r={}));var a=function(){function t(t,e){var i=this;this.move_direction=r.NONE,this.move_speed=10,this.dx=0,this.HandleKeyDown=function(t){switch(t.code){case"ArrowRight":i.move_direction=r.RIGHT;break;case"ArrowLeft":i.move_direction=r.LEFT;break;default:i.move_direction=r.NONE}},this.HandleKeyUp=function(t){switch(t.code){case"ArrowRight":case"ArrowLeft":i.move_direction=r.NONE}},this.HandleMouseMove=function(t){var e=i.display.GetRenderer().canvas,n=t.clientX-e.offsetLeft,o=i.player.GetShape().w/2,r=i.player.GetPosition();n-o>0&&n+o<e.width&&(r.x=n-o),i.player.SetPosition(r)},this.player=t,this.display=e,document.addEventListener("keydown",this.HandleKeyDown,!1),document.addEventListener("keyup",this.HandleKeyUp,!1),document.addEventListener("mousemove",this.HandleMouseMove,!1)}return t.prototype.TakeInput=function(){this.dx=this.move_direction*this.move_speed},t.prototype.Update=function(t){if(this.player.GetLifePoints()>0){var e=this.player.GetPosition();this.display.GetRenderer().GetWidth()>=e.x+this.dx+this.player.GetShape().w&&e.x+this.dx>=0&&(e.x+=this.dx),this.player.SetPosition(e)}else t.EventNotify("player loss",this.player.GetScore())},t.prototype.Draw=function(){this.display.DrawPlayer(this.player.GetShape()),this.display.DrawLifePoints(this.player.GetLifePoints()),this.display.DrawScore(this.player.GetScore())},t.prototype.GetPlayerShape=function(){return this.player.GetShape()},t.prototype.IncreseScore=function(t){this.player.SetScore(this.player.GetScore()+t)},t.prototype.ChangeLifePoints=function(t){this.player.SetLifePoints(this.player.GetLifePoints()+t)},t}(),c=function(){function t(t){this.width=120,this.hieght=80,this.position=t}return t.prototype.GetPosition=function(){return this.position},t.prototype.SetPosition=function(t){this.position=t},t.prototype.GetShape=function(){return{pos:this.position,w:this.width,h:this.hieght}},t}();const p=t.p+"62822baf17c4cba5d4c9.png";var u=function(){function t(t){this.image=new Image,this.renderer=t,this.image.src=p}return t.prototype.DrawPlane=function(t){var e=t.pos,i=t.w,n=t.h,o=e.x,r=e.y;this.renderer.context.drawImage(this.image,o,r,i,n)},t.prototype.SetRenderer=function(t){this.renderer=t},t.prototype.GetRenderer=function(){return this.renderer},t}(),d=function(){function t(t,e){this.direction=r.LEFT,this.speed=2,this.dx=0,this.plane=t,this.display=e}return t.prototype.TakeInput=function(){this.dx=this.direction*this.speed},t.prototype.Update=function(t){var e=this.plane.GetPosition();e.x+this.dx>0?e.x+=this.dx:e.x+=this.display.GetRenderer().GetWidth(),this.plane.SetPosition(e),this.SpawnParachute(t)},t.prototype.Draw=function(){this.display.DrawPlane(this.plane.GetShape())},t.prototype.SpawnParachute=function(t){Math.random()>.99&&t.EventNotify("spawn parachute",this.plane.GetPosition())},t}(),f=function(){function t(t){this.width=40,this.hiegth=60,this.position=t}return t.prototype.GetPosition=function(){return this.position},t.prototype.SetPosition=function(t){this.position=t},t.prototype.GetShape=function(){return{pos:this.position,w:this.width,h:this.hiegth}},t}();const l=t.p+"79bc4031e57a99d2321e.png";var y=function(){function t(t){this.image=new Image,this.renderer=t,this.image.src=l}return t.prototype.DrawParachute=function(t){var e=t.pos,i=t.w,n=t.h,o=e.x,r=e.y;this.renderer.context.drawImage(this.image,o,r,i,n)},t.prototype.SetRenderer=function(t){this.renderer=t},t.prototype.GetRenderer=function(){return this.renderer},t}(),v=function(){function t(t,e,i){this.direction=r.DOWN,this.speed=1,this.dy=0,this.Parachute=t,this.display=e,this.boat_detector=i}return t.prototype.TakeInput=function(){this.dy=this.direction*this.speed},t.prototype.Update=function(t){var e=this.Parachute.GetPosition();e.y<this.display.GetRenderer().GetHeight()?(e.y+=this.dy,this.Parachute.SetPosition(e)):t.EventNotify("parachute died",this),this.boat_detector.IsColliding(this.Parachute.GetShape())&&t.EventNotify("boat collision",this)},t.prototype.Draw=function(){this.display.DrawParachute(this.Parachute.GetShape())},t}(),w=function(){function t(){this.map=new Map}return t.prototype.AddEventNotify=function(t,e){this.map.has(t)||this.map.set(t,new Set),this.map.get(t).add(e)},t.prototype.RemoveEvent=function(t){this.map.delete(t)},t.prototype.RemoveNotify=function(t,e){var i;null===(i=this.map.get(t))||void 0===i||i.delete(e)},t.prototype.EventNotify=function(t,e){var i;null===(i=this.map.get(t))||void 0===i||i.forEach((function(t){t(e)}))},t.prototype.Clear=function(){this.map.clear()},t}(),m=function(){function t(t){this.rect=t}return t.prototype.IsColliding=function(t){return t.pos.x<this.rect.pos.x+this.rect.w&&t.pos.x+t.w>this.rect.pos.x&&t.pos.y<this.rect.pos.y+this.rect.h&&t.pos.y+t.h>this.rect.pos.y},t}();const g=t.p+"4b6164ace66e27fc7555.png",G=t.p+"a43719ad41f26b073dc7.png";var S;(S=new(function(){function t(){var t=this;this.state=o.PUSE,this.renderer=new e,this.actors=new Array,this.events=new w,this.final_score=0,this.background_image=new Image,this.sea_image=new Image,this.sea_lvl=200,this.ResetGame=function(){t.actors=new Array,t.events.Clear(),t.final_score=0,t.Init(),document.removeEventListener("click",t.ResetGame)},this.Run=this.Run.bind(this),this.background_image.src=g,this.sea_image.src=G}return t.prototype.AddActor=function(t){this.actors.push(t)},t.prototype.RemoveActor=function(t){var e=this.actors.indexOf(t);-1!=e&&this.actors.splice(e,1)},t.prototype.Init=function(){var t=this;this.state=o.RUN;var e=new a(new i(new h(this.renderer.GetWidth()/2,.65*this.renderer.GetHeight())),new s(this.renderer));this.AddActor(e),this.AddActor(new d(new c(new h(this.renderer.GetWidth(),50)),new u(this.renderer))),this.events.AddEventNotify("spawn parachute",(function(i){t.AddActor(new v(new f(new h(i.x,i.y)),new y(t.renderer),new m(e.GetPlayerShape())))})),this.events.AddEventNotify("parachute died",(function(i){e.ChangeLifePoints(-1),t.RemoveActor(i)})),this.events.AddEventNotify("boat collision",(function(i){e.IncreseScore(1),t.RemoveActor(i)})),this.events.AddEventNotify("player loss",(function(e){t.state=o.GAME_OVER,t.final_score=e}))},t.prototype.Run=function(){if(this.state!==o.EXIT){switch(this.state){case o.RUN:this.HandleInput(),this.UpdateGame(),this.renderer.Clear(),this.Display();break;case o.GAME_OVER:this.DisplayGameOver(),document.addEventListener("click",this.ResetGame)}requestAnimationFrame(this.Run)}},t.prototype.GetState=function(){return this.state},t.prototype.ChangeState=function(t){this.state=t},t.prototype.HandleInput=function(){this.actors.forEach((function(t){t.TakeInput()}))},t.prototype.UpdateGame=function(){var t=this;this.actors.forEach((function(e){e.Update(t.events)}))},t.prototype.Display=function(){var t=this.renderer.GetWidth(),e=this.renderer.GetHeight();this.renderer.context.drawImage(this.background_image,0,0,t,e),this.renderer.context.drawImage(this.sea_image,0,e-this.sea_lvl,t,this.sea_lvl),this.actors.forEach((function(t){t.Draw()}))},t.prototype.DisplayGameOver=function(){var t=this.renderer.context;t.font="32px Arial",t.fillStyle="#0095DD",t.fillText("Game Over Final Score: ".concat(this.final_score),this.renderer.GetWidth()/2-200,this.renderer.GetHeight()/2-50),t.fillText("Click to restart",this.renderer.GetWidth()/2-100,this.renderer.GetHeight()/2)},t}())).Init(),S.Run()})();
//# sourceMappingURL=bundle.js.map